---
import { Image } from 'astro:assets';
import aroaImg from '../assets/img/aroa.png';
import bluebeeImg from '../assets/img/bluebee.png';
import thumbnail1Img from '../assets/img/thumbnail-1.jpg';
import thumbnail2Img from '../assets/img/thumbnail-2.png';
import thumbnail3Img from '../assets/img/thumbnail-3.png';
import thumbnail4Img from '../assets/img/thumbnail-4.png';
import thumbnail5Img from '../assets/img/thumbnail-5.png';
import thumbnail6Img from '../assets/img/thumbnail-6.png';
import thumbnail7Img from '../assets/img/thumbnail-7.png';
import thumbnail8Img from '../assets/img/thumbnail-8.png';
import thumbnail10Img from '../assets/img/thumbnail-10.png';
import thumbnail11Img from '../assets/img/thumbnail-11.png';
import thumbnail12Img from '../assets/img/thumbnail-12.png';
import thumbnail13Img from '../assets/img/thumbnail-13.png';
import thumbnail14Img from '../assets/img/thumbnail-14.png';
import thumbnail15Img from '../assets/img/thumbnail-15.png';
import thumbnail16Img from '../assets/img/thumbnail-16.png';
import thumbnail17Img from '../assets/img/thumbnail-17.png';
import thumbnail18Img from '../assets/img/thumbnail-18.png';
import thumbnail19Img from '../assets/img/thumbnail-19.png';

interface Props {
  href?: string;
  src: string;
  title: string;
  text: string;
  tag?: 'WEB' | 'GAME' | 'APP' | 'OTHER' | 'ML';
}

const { href, src, title, text, tag = 'other' } = Astro.props;

const tagColors: Record<string, { bg: string; text: string }> = {
  WEB: { bg: 'bg-blue-600', text: 'text-white' },
  GAME: { bg: 'bg-purple-600', text: 'text-white' },
  APP: { bg: 'bg-green-600', text: 'text-white' },
  OTHER: { bg: 'bg-gray-600', text: 'text-white' },
  ML: { bg: 'bg-red-600', text: 'text-white' },
};

// const tagColor = tagColors[tag] || tagColors.other;
const tagColor = { bg: 'bg-transparent', text: 'text-gray-400' };

// Map image paths to imported images
const imageMap: Record<string, ImageMetadata> = {
  '/img/thumbnail-1.jpg': thumbnail1Img,
  '/img/thumbnail-2.png': thumbnail2Img,
  '/img/thumbnail-3.png': thumbnail3Img,
  '/img/thumbnail-4.png': thumbnail4Img,
  '/img/thumbnail-5.png': thumbnail5Img,
  '/img/thumbnail-6.png': thumbnail6Img,
  '/img/thumbnail-7.png': thumbnail7Img,
  '/img/thumbnail-8.png': thumbnail8Img,
  '/img/thumbnail-10.png': thumbnail10Img,
  '/img/thumbnail-11.png': thumbnail11Img,
  '/img/thumbnail-12.png': thumbnail12Img,
  '/img/thumbnail-13.png': thumbnail13Img,
  '/img/thumbnail-14.png': thumbnail14Img,
  '/img/thumbnail-15.png': thumbnail15Img,
  '/img/thumbnail-16.png': thumbnail16Img,
  '/img/thumbnail-17.png': thumbnail17Img,
  '/img/thumbnail-18.png': thumbnail18Img,
  '/img/thumbnail-19.png': thumbnail19Img,
};

const image = imageMap[src];
---

<a href={href}>
  <div class="h-full rounded transition duration-500 ease-in-out transform hover:scale-[1.02]">
    <div class="relative">
      {image ? (
        <Image 
          src={image} 
          alt={title} 
          class="rounded-xl w-full h-auto project-card-shadow border border-gray-900"
          loading="lazy"
        />
      ) : (
        <img 
          src={src} 
          alt={title} 
          class="rounded-xl w-full h-auto project-card-shadow border border-gray-900"
          loading="lazy"
        />
      )}
    </div>
    <div class="p-6 flex flex-col gap-5">
      <div class="flex flex-row sm:flex-row sm:items-center justify-between">
        <div class="flex items-center gap-2 text-xl font-medium text-white">
          {title}
          {href && href.trim() !== '' && (
            <svg class="h-4 w-4 text-gray-400 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">
              <title>External link</title>
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244" />
            </svg>
          )}
        </div>
        {tag && (
          <span class={`${tagColor.bg} ${tagColor.text} text-xs px-3 pb-1 pt-[6px] rounded-full border border-1 border-gray-700 tracking-wide whitespace-nowrap self-start sm:self-auto`}>
            {tag}
          </span>
        )}
      </div>
      <div class="text-gray-400 font-light">{text}</div>
    </div>
  </div>
</a>
